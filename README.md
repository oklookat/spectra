# Spectra

(AI-translated)

English | [Русский](./docs/README.ru.md)

![App screenshot](./docs/screenshot.jpg)

This is an Android app, a wrapper for the [Xray-core](https://github.com/XTLS/Xray-core).

Interaction with the core is done via [AndroidLibXrayLite by 2dust](https://github.com/2dust/AndroidLibXrayLite).

The project is unstable, so it may change drastically over time.

Main sources of inspiration: [sing-box-for-android](https://github.com/SagerNet/sing-box-for-android), [v2rayNG](https://github.com/2dust/v2rayNG).

## What's broken

- Subscription system (vless:// and so on). They are imported, but a proper parser and config editor need to be written.

- Full Xray config works fine for now. Config example:

```json
{
    "log": {
        "loglevel": "warning"
    },
    "dns": {
        "queryStrategy": "UseIPv4",
        "servers": [
            {
                "address": "https://1.1.1.1/dns-query"
            }
        ]
    },
    "routing": {
        "domainStrategy": "AsIs",
        "rules": [
            {
                "type": "field",
                "inboundTag": [
                    "tun-in"
                ],
                "port": "53",
                "outboundTag": "dns-out"
            }
        ]
    },
    "inbounds": [
        {
            "protocol": "tun",
            "tag": "tun-in",
            "settings": {
                "MTU": 9000
            },
            "sniffing": {
                "enabled": true,
                "destOverride": [
                    "http",
                    "tls"
                ]
            }
        }
    ],
    "outbounds": [
        {
            "tag": "direct-out",
            "protocol": "freedom",
            "settings": {
                "targetStrategy": "UseIPv4"
            }
        },
        {
            "protocol": "dns",
            "tag": "dns-out",
            "settings": {
                "nonIPQuery": "skip"
            }
        },
        {
            "tag": "block-out",
            "protocol": "blackhole",
            "settings": {
                "response": {
                    "type": "http"
                }
            }
        }
    ]
}
```

## Features (on paper)

* English, Russian translation

* Android TV support

* Android VPN <-> Xray TUN

* Xray log screen

* Config import

  * Via URL
  * Manually
  * By QR code (within the same local network)
  * From a file
  * Via local link (spectra.local)

* Automatic update of configs added via URL every n minutes.
  If the service is running and the current config is updated, the service restarts automatically.

* Share config (scan QR code)

* Groups

* Adding Xray geo-files

## Why "On paper"

Currently, 99% of the code is generated by the Gemini, for which I’m very grateful. I slowly test, report bugs, and make minor fixes.
This drastically reduced development time, but the drawbacks of this approach are obvious.

For now, that’s how it is.

## Additional Information

### Supported Links

To import configs via a link, you need to enable **“Supported Links”** for the app in Android settings.

When the app launches, a dialog should prompt you to do this.

The link scheme is:

`https://spectra.local/import?data=base64`

where `base64` is:

`name=Base&autoupdate=true&autoupdateinterval=60&url=https://example.com/config.json`

* **name**: profile name
* **autoupdate**: true | false, enable auto-update?
* **autoupdateinterval**: auto-update interval in minutes
* **url**: link to the Xray JSON config

The entire string must be encoded in base64.

## Building

### AndroidLibXrayLite

Place `libv2ray.aar` (required) and `libv2ray-sources.jar` (optional, for IDE type hints) into the [app/libs directory](../app/libs).

You can download them or compile them yourself from the AndroidLibXrayLite repository (link at the top of the README).

After that, you can build the project in Android Studio as usual.
